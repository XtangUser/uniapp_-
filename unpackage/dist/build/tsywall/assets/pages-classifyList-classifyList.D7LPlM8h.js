import{b as a,y as s,s as e,z as l,d as t,e as i,c as u,w as o,p as n,a as r,F as c,i as d,o as m,f as p,m as v,h as f}from"./index-DVkdyF2D.js";import{_ as g}from"./uni-load-more.DYHmKG5W.js";import{_ as y,b as _,c as h,o as b,a as j,r as w}from"./uni-app.es.cATv8Me3.js";import{e as L,f as $}from"./apis.CImeGdww.js";import{g as k}from"./common.Daw-rcV2.js";const x=y({__name:"classifyList",setup(y){const x={pageNum:1,pageSize:12};let z=null;const C=a(1);_((a=>{const{id:e=null,name:l=null,type:t=null}=a;e||k(),z=l,s({title:l}),t&&(x.type=t,q()),e&&(x.classid=e,N())}));const F=a([]),N=async()=>{let a=await L(x);F.value=[...F.value,...a.data],e("storageClassList",F.value),0==a.data.length&&(l({title:"到底了",icon:"error"}),C.value=0)},q=async()=>{let a=await $(x);F.value=[...F.value,...a.data],e("storageClassList",F.value),0==a.data.length&&(l({title:"到底了",icon:"error"}),C.value=0)};return h((()=>{0!==C.value&&(x.pageNum++,x.classid&&N(),x.type&&q())})),b((()=>({title:"小唐壁纸酷-"+z,path:`/pages/classifyList/classifyList?id=${x.classid}&name=${z}`}))),j((()=>({title:"小唐壁纸酷-"+z,query:`id=${x.classid}&name=${z}`}))),(a,s)=>{const e=w(t("uni-load-more"),g),l=d,y=v,_=f;return m(),i(c,null,[F.value.length||0==C.value?n("",!0):(m(),u(l,{key:0,class:"loading"},{default:o((()=>[r(e,{status:"loading"})])),_:1})),r(l,{class:"content"},{default:o((()=>[(m(!0),i(c,null,p(F.value,(a=>(m(),u(_,{url:`/pages/preview/preview?id=${a._id}`,class:"item",key:a._id},{default:o((()=>[r(y,{src:a.smallPicurl,mode:"aspectFill",class:"image"},null,8,["src"])])),_:2},1032,["url"])))),128))])),_:1}),F.value.length||0===C.value?(m(),u(l,{key:1,class:"loading"},{default:o((()=>[r(e,{status:1===C.value?"loading":"noMore"},null,8,["status"])])),_:1})):n("",!0),r(l,{class:"safe-arae-insert-bottom"})],64)}}},[["__scopeId","data-v-bd65550c"]]);export{x as default};
