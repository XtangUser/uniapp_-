"use strict";const e=require("../../common/vendor.js"),a=require("../../api/apis.js"),t=require("../../utils/common.js");if(!Array){e.resolveComponent("uni-load-more")()}Math;const s={__name:"classifyList",setup(s){const l={pageNum:1,pageSize:12};let i=null;const o=e.ref(1);e.onLoad((a=>{const{id:s=null,name:o=null,type:n=null}=a;s||t.gotoHome(),i=o,e.index.setNavigationBarTitle({title:o}),n&&(l.type=n,u()),s&&(l.classid=s,r())}));const n=e.ref([]),r=async()=>{let t=await a.apiGetClassList(l);n.value=[...n.value,...t.data],e.index.setStorageSync("storageClassList",n.value),0==t.data.length&&(e.index.showToast({title:"到底了",icon:"error"}),o.value=0)},u=async()=>{let t=await a.apiGetHistoryList(l);n.value=[...n.value,...t.data],e.index.setStorageSync("storageClassList",n.value),0==t.data.length&&(e.index.showToast({title:"到底了",icon:"error"}),o.value=0)};return e.onReachBottom((()=>{0!==o.value&&(l.pageNum++,l.classid&&r(),l.type&&u())})),e.onShareAppMessage((()=>({title:"小唐壁纸酷-"+i,path:`/pages/classifyList/classifyList?id=${l.classid}&name=${i}`}))),e.onShareTimeline((()=>({title:"小唐壁纸酷-"+i,query:`id=${l.classid}&name=${i}`}))),e.onUnload((()=>{e.index.removeStorageSync("storgClassList")})),(a,t)=>e.e({a:!n.value.length&&0!=o.value},n.value.length||0==o.value?{}:{b:e.p({status:"loading"})},{c:e.f(n.value,((e,a,t)=>({a:e.smallPicurl,b:`/pages/preview/preview?id=${e._id}`,c:e._id}))),d:n.value.length||0===o.value},n.value.length||0===o.value?{e:e.p({status:1===o.value?"loading":"noMore"})}:{})}},l=e._export_sfc(s,[["__scopeId","data-v-09d1b5cf"]]);s.__runtimeHooks=6,wx.createPage(l);
